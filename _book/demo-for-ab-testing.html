<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 Demo for A/B testing | Codes for STEM</title>
  <meta name="description" content="This is a collection of codes for analytics projects from import, wrangling, analyzing, visualizing, to reporting" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 Demo for A/B testing | Codes for STEM" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a collection of codes for analytics projects from import, wrangling, analyzing, visualizing, to reporting" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Demo for A/B testing | Codes for STEM" />
  
  <meta name="twitter:description" content="This is a collection of codes for analytics projects from import, wrangling, analyzing, visualizing, to reporting" />
  

<meta name="author" content="Noushin Nabavi" />


<meta name="date" content="2020-09-19" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="tests-for-experiments.html"/>
<link rel="next" href="r-for-reporting.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Coding for STEM</a></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a></li>
<li class="chapter" data-level="3" data-path="useful-r-functions-examples.html"><a href="useful-r-functions-examples.html"><i class="fa fa-check"></i><b>3</b> Useful R Functions + Examples</a><ul>
<li class="chapter" data-level="3.1" data-path="useful-r-functions-examples.html"><a href="useful-r-functions-examples.html#contents"><i class="fa fa-check"></i><b>3.1</b> Contents</a></li>
<li class="chapter" data-level="3.2" data-path="useful-r-functions-examples.html"><a href="useful-r-functions-examples.html#r-syntax"><i class="fa fa-check"></i><b>3.2</b> R Syntax</a></li>
<li class="chapter" data-level="3.3" data-path="useful-r-functions-examples.html"><a href="useful-r-functions-examples.html#functional-examples"><i class="fa fa-check"></i><b>3.3</b> Functional examples</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="demo-for-dplyr.html"><a href="demo-for-dplyr.html"><i class="fa fa-check"></i><b>4</b> Demo for dplyr</a></li>
<li class="chapter" data-level="5" data-path="demo-for-data-table.html"><a href="demo-for-data-table.html"><i class="fa fa-check"></i><b>5</b> Demo for Data.table</a></li>
<li class="chapter" data-level="6" data-path="tests-for-experiments.html"><a href="tests-for-experiments.html"><i class="fa fa-check"></i><b>6</b> Tests for experiments</a></li>
<li class="chapter" data-level="7" data-path="demo-for-ab-testing.html"><a href="demo-for-ab-testing.html"><i class="fa fa-check"></i><b>7</b> Demo for A/B testing</a></li>
<li class="chapter" data-level="8" data-path="r-for-reporting.html"><a href="r-for-reporting.html"><i class="fa fa-check"></i><b>8</b> R for Reporting</a><ul>
<li class="chapter" data-level="8.1" data-path="r-for-reporting.html"><a href="r-for-reporting.html#usage-demonstrations"><i class="fa fa-check"></i><b>8.1</b> Usage demonstrations</a><ul>
<li class="chapter" data-level="8.1.1" data-path="r-for-reporting.html"><a href="r-for-reporting.html#inline-code"><i class="fa fa-check"></i><b>8.1.1</b> Inline code</a></li>
<li class="chapter" data-level="8.1.2" data-path="r-for-reporting.html"><a href="r-for-reporting.html#code-chunks"><i class="fa fa-check"></i><b>8.1.2</b> Code chunks</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="r-for-reporting.html"><a href="r-for-reporting.html#resources"><i class="fa fa-check"></i><b>8.2</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="r-for-reporting.html"><a href="r-for-reporting.html#resources"><i class="fa fa-check"></i>Resources</a><ul>
<li class="chapter" data-level="8.3" data-path="resources.html"><a href="resources.html"><i class="fa fa-check"></i><b>8.3</b> Beginner Resources by Topic</a><ul>
<li class="chapter" data-level="8.3.1" data-path="resources.html"><a href="resources.html#getting-set-up-with-r-rstudio"><i class="fa fa-check"></i><b>8.3.1</b> Getting Set-Up with R &amp; RStudio</a></li>
<li class="chapter" data-level="8.3.2" data-path="resources.html"><a href="resources.html#specialist-topics"><i class="fa fa-check"></i><b>8.3.2</b> Specialist Topics</a></li>
<li class="chapter" data-level="8.3.3" data-path="resources.html"><a href="resources.html#operational-basics"><i class="fa fa-check"></i><b>8.3.3</b> Operational Basics</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="resources.html"><a href="resources.html#getting-your-data-into-r"><i class="fa fa-check"></i><b>8.4</b> Getting Your Data into R</a></li>
<li class="chapter" data-level="8.5" data-path="resources.html"><a href="resources.html#getting-your-data-out-of-r"><i class="fa fa-check"></i><b>8.5</b> Getting Your Data out of R</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="importing-data-into-r.html"><a href="importing-data-into-r.html"><i class="fa fa-check"></i><b>9</b> Importing data into R</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Codes for STEM</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="demo-for-ab-testing" class="section level1">
<h1><span class="header-section-number">Chapter 7</span> Demo for A/B testing</h1>
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb323-1" data-line-number="1"><span class="co"># load dependencies</span></a>
<a class="sourceLine" id="cb323-2" data-line-number="2"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb323-3" data-line-number="3"><span class="kw">library</span>(powerMediation)</a>
<a class="sourceLine" id="cb323-4" data-line-number="4"><span class="kw">library</span>(broom)</a>
<a class="sourceLine" id="cb323-5" data-line-number="5"><span class="kw">library</span>(pwr)</a>
<a class="sourceLine" id="cb323-6" data-line-number="6"><span class="kw">library</span>(gsDesign)</a>
<a class="sourceLine" id="cb323-7" data-line-number="7"><span class="kw">library</span>(powerMediation)</a></code></pre></div>
<p>Read in data:</p>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb324-1" data-line-number="1">fileLocation &lt;-<span class="st"> &quot;http://stat.columbia.edu/~rachel/datasets/nyt1.csv&quot;</span></a>
<a class="sourceLine" id="cb324-2" data-line-number="2">click_data &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="kw">url</span>(fileLocation))</a></code></pre></div>
<p>Find oldest and most recent age:</p>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb325-1" data-line-number="1"><span class="kw">min</span>(click_data<span class="op">$</span>Age)</a></code></pre></div>
<pre><code>## [1] 0</code></pre>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb327-1" data-line-number="1"><span class="kw">max</span>(click_data<span class="op">$</span>Age) </a></code></pre></div>
<pre><code>## [1] 108</code></pre>
<p>Compute baseline conversion rates:</p>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb329-1" data-line-number="1">click_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb329-2" data-line-number="2"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">impression_rate =</span> <span class="kw">mean</span>(Impressions))</a></code></pre></div>
<pre><code>##   impression_rate
## 1        5.007316</code></pre>
<p>determine baseline for genders:</p>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb331-1" data-line-number="1">click_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb331-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(Gender) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb331-3" data-line-number="3"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">impression_rate =</span> <span class="kw">mean</span>(Impressions))</a></code></pre></div>
<pre><code>## # A tibble: 2 x 2
##   Gender impression_rate
##    &lt;int&gt;           &lt;dbl&gt;
## 1      0            5.01
## 2      1            5.01</code></pre>
<p>determine baseline for clicks:</p>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb333-1" data-line-number="1">click_data_age&lt;-<span class="st"> </span>click_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb333-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(Clicks, Age) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb333-3" data-line-number="3"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">impression_rate =</span> <span class="kw">mean</span>(Impressions))</a></code></pre></div>
<p>visualize baselines:</p>
<div class="sourceCode" id="cb334"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb334-1" data-line-number="1"><span class="kw">ggplot</span>(click_data_age, <span class="kw">aes</span>(<span class="dt">x =</span> Age, <span class="dt">y =</span> impression_rate)) <span class="op">+</span></a>
<a class="sourceLine" id="cb334-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb334-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_line</span>() </a></code></pre></div>
<p><img src="code4stem_files/figure-html/visualize%20baselines-1.png" width="672" /></p>
<p>Experimental design, power analysis, and t-tests</p>
<p>run power analysis:
learn more here: help(SSizeLogisticBin)</p>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb335-1" data-line-number="1">total_sample_size &lt;-<span class="st"> </span><span class="kw">SSizeLogisticBin</span>(<span class="dt">p1 =</span> <span class="fl">0.2</span>, <span class="co"># conversion rate for control condition</span></a>
<a class="sourceLine" id="cb335-2" data-line-number="2">                                      <span class="dt">p2 =</span> <span class="fl">0.3</span>, <span class="co"># conversion rate for expected conversion rate for test condition: backed by previous data (e.g.30% conversion rate to get 10% boost)</span></a>
<a class="sourceLine" id="cb335-3" data-line-number="3">                                      <span class="dt">B =</span> <span class="fl">0.5</span>, <span class="co"># most commonly used</span></a>
<a class="sourceLine" id="cb335-4" data-line-number="4">                                      <span class="dt">alpha =</span> <span class="fl">0.05</span>, <span class="co"># most commonly used</span></a>
<a class="sourceLine" id="cb335-5" data-line-number="5">                                      <span class="dt">power =</span> <span class="fl">0.8</span>) <span class="co"># most commonly used</span></a>
<a class="sourceLine" id="cb335-6" data-line-number="6">total_sample_size</a></code></pre></div>
<pre><code>## [1] 587</code></pre>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb337-1" data-line-number="1">total_sample_size <span class="op">/</span><span class="dv">2</span> <span class="co"># per condition</span></a></code></pre></div>
<pre><code>## [1] 293.5</code></pre>
<p>can use a ttest or linear regression for statistical tests:
lm is used when more variables are in data but similar to t-test</p>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb339-1" data-line-number="1"><span class="kw">lm</span>(Gender <span class="op">~</span><span class="st"> </span>Clicks, <span class="dt">data =</span> click_data) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb339-2" data-line-number="2"><span class="st">  </span><span class="kw">summary</span>()</a></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = Gender ~ Clicks, data = click_data)
## 
## Residuals:
##    Min     1Q Median     3Q    Max 
## -0.375 -0.375 -0.375  0.625  0.884 
## 
## Coefficients:
##               Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  0.3750325  0.0007418  505.56   &lt;2e-16 ***
## Clicks      -0.0863451  0.0022930  -37.66   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.4813 on 458439 degrees of freedom
## Multiple R-squared:  0.003083,	Adjusted R-squared:  0.003081 
## F-statistic:  1418 on 1 and 458439 DF,  p-value: &lt; 2.2e-16</code></pre>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb341-1" data-line-number="1"><span class="co"># t.test(Gender ~ Clicks, data = click_data) %&gt;%</span></a>
<a class="sourceLine" id="cb341-2" data-line-number="2"><span class="co">#  summary()</span></a></code></pre></div>
<p>Analyzing results
Group and summarize</p>
<div class="sourceCode" id="cb342"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb342-1" data-line-number="1">click_data_groups &lt;-<span class="st"> </span>click_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb342-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(Clicks, Age) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb342-3" data-line-number="3"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">impression_rate =</span> <span class="kw">mean</span>(Impressions))</a></code></pre></div>
<p>Make plot of conversion rates for clicks:</p>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb343-1" data-line-number="1"><span class="kw">ggplot</span>(click_data_groups,</a>
<a class="sourceLine" id="cb343-2" data-line-number="2">       <span class="kw">aes</span>(<span class="dt">x =</span> Age,</a>
<a class="sourceLine" id="cb343-3" data-line-number="3">           <span class="dt">y =</span> impression_rate,</a>
<a class="sourceLine" id="cb343-4" data-line-number="4">           <span class="dt">color =</span> Clicks,</a>
<a class="sourceLine" id="cb343-5" data-line-number="5">           <span class="dt">group =</span> Clicks)) <span class="op">+</span></a>
<a class="sourceLine" id="cb343-6" data-line-number="6"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">size =</span> <span class="dv">3</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb343-7" data-line-number="7"><span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">lwd =</span> <span class="dv">1</span>)</a></code></pre></div>
<p><img src="code4stem_files/figure-html/visualize%20clicks-1.png" width="672" /></p>
<p>Make plot of conversion rates for clicks
(can add intercepts and interaction of two variables):</p>
<div class="sourceCode" id="cb344"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb344-1" data-line-number="1"><span class="kw">ggplot</span>(click_data_groups,</a>
<a class="sourceLine" id="cb344-2" data-line-number="2">       <span class="kw">aes</span>(<span class="dt">x =</span> Age,</a>
<a class="sourceLine" id="cb344-3" data-line-number="3">           <span class="dt">y =</span> impression_rate,</a>
<a class="sourceLine" id="cb344-4" data-line-number="4">           <span class="dt">color =</span> Clicks,</a>
<a class="sourceLine" id="cb344-5" data-line-number="5">           <span class="dt">group =</span> <span class="kw">interaction</span>(Clicks, impression_rate))) <span class="op">+</span></a>
<a class="sourceLine" id="cb344-6" data-line-number="6"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">size =</span> <span class="dv">3</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb344-7" data-line-number="7"><span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">lwd =</span> <span class="dv">1</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb344-8" data-line-number="8"><span class="st">  </span><span class="kw">geom_vline</span>(<span class="dt">xintercept =</span> <span class="kw">as.numeric</span>(<span class="kw">as.Date</span>(<span class="st">&quot;2018-02-15&quot;</span>))) </a></code></pre></div>
<p><img src="code4stem_files/figure-html/plot%20clicks-1.png" width="672" /></p>
<p>Check for glm documentation
family can be used to express different error distributions.
?glm</p>
<p>Run logistic regression to analyze model outputs:</p>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb345-1" data-line-number="1">experiment_results &lt;-<span class="st"> </span><span class="kw">glm</span>(Gender <span class="op">~</span><span class="st"> </span>Clicks,</a>
<a class="sourceLine" id="cb345-2" data-line-number="2">                          <span class="dt">family =</span> <span class="st">&quot;binomial&quot;</span>,</a>
<a class="sourceLine" id="cb345-3" data-line-number="3">                          <span class="dt">data =</span> click_data) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb345-4" data-line-number="4"><span class="st">  </span><span class="kw">tidy</span>()</a>
<a class="sourceLine" id="cb345-5" data-line-number="5"></a>
<a class="sourceLine" id="cb345-6" data-line-number="6">experiment_results</a></code></pre></div>
<pre><code>## # A tibble: 2 x 5
##   term        estimate std.error statistic   p.value
##   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
## 1 (Intercept)   -0.510   0.00319    -160.  0.       
## 2 Clicks        -0.400   0.0107      -37.3 4.10e-304</code></pre>
<p>Follow-up experimentations to test assumptions</p>
<p>Designing follow-up experiments since A/B testing is a continuous loops
i.e. make new dataframes and compute various other conversion rate differences
can use spread() to reformat data</p>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb347-1" data-line-number="1">click_data_new_groups &lt;-<span class="st"> </span>click_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb347-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(Clicks, Age) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb347-3" data-line-number="3"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">impression_rate =</span> <span class="kw">mean</span>(Impressions)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb347-4" data-line-number="4"><span class="st">  </span><span class="kw">spread</span>(Clicks, impression_rate)</a></code></pre></div>
<p>Compute summary statistics:</p>
<div class="sourceCode" id="cb348"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb348-1" data-line-number="1"><span class="kw">mean</span>(click_data_new_groups<span class="op">$</span>Age, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code>## [1] 55.9802</code></pre>
<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb350-1" data-line-number="1"><span class="kw">sd</span>(click_data_new_groups<span class="op">$</span>Age, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code>## [1] 29.4771</code></pre>
<p>Run logistic regression and power analysis
Run power analysis for logistic regression</p>
<div class="sourceCode" id="cb352"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb352-1" data-line-number="1">total_sample_size &lt;-<span class="st"> </span><span class="kw">SSizeLogisticBin</span>(<span class="dt">p1 =</span> <span class="fl">0.49</span>,</a>
<a class="sourceLine" id="cb352-2" data-line-number="2">                                      <span class="dt">p2 =</span> <span class="fl">0.64</span>,</a>
<a class="sourceLine" id="cb352-3" data-line-number="3">                                      <span class="dt">B =</span> <span class="fl">0.5</span>,</a>
<a class="sourceLine" id="cb352-4" data-line-number="4">                                      <span class="dt">alpha =</span> <span class="fl">0.05</span>,</a>
<a class="sourceLine" id="cb352-5" data-line-number="5">                                      <span class="dt">power =</span> <span class="fl">0.8</span>)</a>
<a class="sourceLine" id="cb352-6" data-line-number="6">total_sample_size</a></code></pre></div>
<pre><code>## [1] 341</code></pre>
<p>View summary of data:</p>
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb354-1" data-line-number="1">new_data &lt;-<span class="st"> </span>click_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb354-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(Clicks) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb354-3" data-line-number="3"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">impression_rate =</span> <span class="kw">mean</span>(Impressions)<span class="op">/</span><span class="dv">10</span>)</a>
<a class="sourceLine" id="cb354-4" data-line-number="4"></a>
<a class="sourceLine" id="cb354-5" data-line-number="5"><span class="co"># Run logistic regression to analyze model outputs</span></a>
<a class="sourceLine" id="cb354-6" data-line-number="6">followup_experiment_sep_results &lt;-<span class="st"> </span><span class="kw">glm</span>(impression_rate <span class="op">~</span><span class="st"> </span>Clicks,</a>
<a class="sourceLine" id="cb354-7" data-line-number="7">                                       <span class="dt">family =</span> <span class="st">&quot;binomial&quot;</span>,</a>
<a class="sourceLine" id="cb354-8" data-line-number="8">                                       <span class="dt">data =</span> new_data) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb354-9" data-line-number="9"><span class="st">  </span><span class="kw">tidy</span>()</a></code></pre></div>
<pre><code>## Warning in eval(family$initialize): non-integer #successes in a binomial glm!</code></pre>
<div class="sourceCode" id="cb356"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb356-1" data-line-number="1">followup_experiment_sep_results</a></code></pre></div>
<pre><code>## # A tibble: 2 x 5
##   term        estimate std.error statistic p.value
##   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
## 1 (Intercept)  0.00899     1.59    0.00566   0.995
## 2 Clicks       0.361       0.710   0.509     0.611</code></pre>
<p>Specifics of A/B Testing= use of experimental design to compare 2 or more variants of a design
Test Types: A/B, A/A, A/B/N test conditions
Assumptions to test: within group vs. between group experiments</p>
<p>e.g. plotting A/A data
Compute conversion rates for A/A experiment:</p>
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb358-1" data-line-number="1">click_data_sum &lt;-<span class="st"> </span>click_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb358-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(Signed_In) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb358-3" data-line-number="3"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">impression_rate =</span> <span class="kw">mean</span>(Impressions)<span class="op">/</span><span class="dv">10</span>)</a>
<a class="sourceLine" id="cb358-4" data-line-number="4">click_data_sum</a></code></pre></div>
<pre><code>## # A tibble: 2 x 2
##   Signed_In impression_rate
##       &lt;int&gt;           &lt;dbl&gt;
## 1         0           0.500
## 2         1           0.501</code></pre>
<p>Plot conversion rates for two conditions:</p>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb360-1" data-line-number="1"><span class="kw">ggplot</span>(click_data_sum,</a>
<a class="sourceLine" id="cb360-2" data-line-number="2">       <span class="kw">aes</span>(<span class="dt">x =</span> Signed_In, <span class="dt">y =</span> impression_rate)) <span class="op">+</span></a>
<a class="sourceLine" id="cb360-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>)  </a></code></pre></div>
<p><img src="code4stem_files/figure-html/plot%20conversion%20rates-1.png" width="672" /></p>
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb361-1" data-line-number="1"><span class="co">#Based on these bar plots the two A conditions look very similar. That&#39;s good!</span></a></code></pre></div>
<p>Run logistic regression to analyze model outputs:</p>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb362-1" data-line-number="1">aa_experiment_results &lt;-<span class="st"> </span><span class="kw">glm</span>(Signed_In <span class="op">~</span><span class="st"> </span>impression_rate,</a>
<a class="sourceLine" id="cb362-2" data-line-number="2">                             <span class="dt">family =</span> <span class="st">&quot;binomial&quot;</span>,</a>
<a class="sourceLine" id="cb362-3" data-line-number="3">                             <span class="dt">data =</span> click_data_sum) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb362-4" data-line-number="4"><span class="st">  </span><span class="kw">tidy</span>()</a>
<a class="sourceLine" id="cb362-5" data-line-number="5">aa_experiment_results</a></code></pre></div>
<pre><code>## # A tibble: 2 x 5
##   term            estimate  std.error statistic p.value
##   &lt;chr&gt;              &lt;dbl&gt;      &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
## 1 (Intercept)      -21589.  51475133. -0.000419    1.00
## 2 impression_rate   43135. 102844880.  0.000419    1.00</code></pre>
<p>Confounding variables: element that can affect the truth of A/B exp
change one element at a time to know the change you are testing
Need to also consider the side effects
procedures are the same as above</p>
<p>Power analysis requires 3 variables: power (1-beta) , significance level (alpha or p-value), effect size
as power goes up, so does the of data points needed
as significance level goes up (i.e. more significant), so do of data points needed
as effect sizw increase, of data points decrease
ttest (linear regression) can be used for continuous dependent variable (e.g. time spent on a website)</p>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb364-1" data-line-number="1"><span class="kw">pwr.t.test</span>(<span class="dt">power =</span> <span class="fl">0.8</span>,</a>
<a class="sourceLine" id="cb364-2" data-line-number="2">           <span class="dt">sig.level =</span> <span class="fl">0.05</span>,</a>
<a class="sourceLine" id="cb364-3" data-line-number="3">           <span class="dt">d =</span> <span class="fl">0.6</span>)  <span class="co"># d = effect size </span></a></code></pre></div>
<pre><code>## 
##      Two-sample t test power calculation 
## 
##               n = 44.58577
##               d = 0.6
##       sig.level = 0.05
##           power = 0.8
##     alternative = two.sided
## 
## NOTE: n is number in *each* group</code></pre>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb366-1" data-line-number="1"><span class="kw">pwr.t.test</span>(<span class="dt">power =</span> <span class="fl">0.8</span>,</a>
<a class="sourceLine" id="cb366-2" data-line-number="2">           <span class="dt">sig.level =</span> <span class="fl">0.05</span>,</a>
<a class="sourceLine" id="cb366-3" data-line-number="3">           <span class="dt">d =</span> <span class="fl">0.2</span>) <span class="co">#(see more on experimental design)</span></a></code></pre></div>
<pre><code>## 
##      Two-sample t test power calculation 
## 
##               n = 393.4057
##               d = 0.2
##       sig.level = 0.05
##           power = 0.8
##     alternative = two.sided
## 
## NOTE: n is number in *each* group</code></pre>
<p>Load package to run power analysis: library(powerMediation)</p>
<p>logistic regression can be used for categorical dependent variable (e.g. click or not click)
Run power analysis for logistic regression</p>
<div class="sourceCode" id="cb368"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb368-1" data-line-number="1">total_sample_size &lt;-<span class="st"> </span><span class="kw">SSizeLogisticBin</span>(<span class="dt">p1 =</span> <span class="fl">0.17</span>, <span class="co"># assuming a control value of 17%</span></a>
<a class="sourceLine" id="cb368-2" data-line-number="2">                                      <span class="dt">p2 =</span> <span class="fl">0.27</span>, <span class="co"># assuming 10% increase in the test condition</span></a>
<a class="sourceLine" id="cb368-3" data-line-number="3">                                      <span class="dt">B =</span> <span class="fl">0.5</span>,</a>
<a class="sourceLine" id="cb368-4" data-line-number="4">                                      <span class="dt">alpha =</span> <span class="fl">0.05</span>,</a>
<a class="sourceLine" id="cb368-5" data-line-number="5">                                      <span class="dt">power =</span> <span class="fl">0.8</span>)</a>
<a class="sourceLine" id="cb368-6" data-line-number="6">total_sample_size</a></code></pre></div>
<pre><code>## [1] 537</code></pre>
<p>Stopping rules and sequential analysis
procedures that allow interim analyses in pre-defined points = sequential analysis</p>
<div class="sourceCode" id="cb370"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb370-1" data-line-number="1">seq_analysis &lt;-<span class="st"> </span><span class="kw">gsDesign</span>(<span class="dt">k=</span><span class="dv">4</span>, <span class="co"># number of times you want to look at the data</span></a>
<a class="sourceLine" id="cb370-2" data-line-number="2">                         <span class="dt">test.type =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb370-3" data-line-number="3">                         <span class="dt">alpha =</span> <span class="fl">0.05</span>,</a>
<a class="sourceLine" id="cb370-4" data-line-number="4">                         <span class="dt">beta =</span> <span class="fl">0.2</span>, <span class="co"># power = 1-beta so power is 0.8</span></a>
<a class="sourceLine" id="cb370-5" data-line-number="5">                         <span class="dt">sfu =</span> <span class="st">&quot;Pocock&quot;</span>) <span class="co"># spending function to figure out how to update p-values</span></a>
<a class="sourceLine" id="cb370-6" data-line-number="6">seq_analysis</a></code></pre></div>
<pre><code>## One-sided group sequential design with
## 80 % power and 5 % Type I Error.
##            Sample
##             Size 
##   Analysis Ratio*  Z   Nominal p  Spend
##          1  0.306 2.07    0.0193 0.0193
##          2  0.612 2.07    0.0193 0.0132
##          3  0.918 2.07    0.0193 0.0098
##          4  1.224 2.07    0.0193 0.0077
##      Total                       0.0500 
## 
## ++ alpha spending:
##  Pocock boundary.
## * Sample size ratio compared to fixed design with no interim
## 
## Boundary crossing probabilities and expected sample size
## assume any cross stops the trial
## 
## Upper boundary (power or Type I Error)
##           Analysis
##    Theta      1      2      3      4 Total   E{N}
##   0.0000 0.0193 0.0132 0.0098 0.0077  0.05 1.1952
##   2.4865 0.2445 0.2455 0.1845 0.1255  0.80 0.7929</code></pre>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb372-1" data-line-number="1">max_n &lt;-<span class="st"> </span><span class="dv">1000</span></a>
<a class="sourceLine" id="cb372-2" data-line-number="2">max_n_per_group &lt;-<span class="st"> </span>max_n <span class="op">/</span><span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb372-3" data-line-number="3">stopping_points &lt;-<span class="st"> </span>max_n_per_group <span class="op">*</span><span class="st"> </span>seq_analysis<span class="op">$</span>timing</a>
<a class="sourceLine" id="cb372-4" data-line-number="4">stopping_points</a></code></pre></div>
<pre><code>## [1] 125 250 375 500</code></pre>
<p>Run sequential analysis:</p>
<div class="sourceCode" id="cb374"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb374-1" data-line-number="1">seq_analysis_3looks &lt;-<span class="st"> </span><span class="kw">gsDesign</span>(<span class="dt">k =</span> <span class="dv">3</span>,</a>
<a class="sourceLine" id="cb374-2" data-line-number="2">                                <span class="dt">test.type =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb374-3" data-line-number="3">                                <span class="dt">alpha =</span> <span class="fl">0.05</span>,</a>
<a class="sourceLine" id="cb374-4" data-line-number="4">                                <span class="dt">beta =</span> <span class="fl">0.2</span>,</a>
<a class="sourceLine" id="cb374-5" data-line-number="5">                                <span class="dt">sfu =</span> <span class="st">&quot;Pocock&quot;</span>)</a>
<a class="sourceLine" id="cb374-6" data-line-number="6">seq_analysis_3looks</a></code></pre></div>
<pre><code>## One-sided group sequential design with
## 80 % power and 5 % Type I Error.
##            Sample
##             Size 
##   Analysis Ratio*  Z   Nominal p  Spend
##          1  0.394 1.99    0.0232 0.0232
##          2  0.789 1.99    0.0232 0.0155
##          3  1.183 1.99    0.0232 0.0113
##      Total                       0.0500 
## 
## ++ alpha spending:
##  Pocock boundary.
## * Sample size ratio compared to fixed design with no interim
## 
## Boundary crossing probabilities and expected sample size
## assume any cross stops the trial
## 
## Upper boundary (power or Type I Error)
##           Analysis
##    Theta      1      2      3 Total   E{N}
##   0.0000 0.0232 0.0155 0.0113  0.05 1.1591
##   2.4865 0.3334 0.2875 0.1791  0.80 0.8070</code></pre>
<p>Fill in max number of points and compute points per group and find stopping points</p>
<div class="sourceCode" id="cb376"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb376-1" data-line-number="1">max_n &lt;-<span class="st"> </span><span class="dv">3000</span></a>
<a class="sourceLine" id="cb376-2" data-line-number="2">max_n_per_group &lt;-<span class="st"> </span>max_n <span class="op">/</span><span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb376-3" data-line-number="3">stopping_points =<span class="st"> </span>max_n_per_group <span class="op">*</span><span class="st"> </span>seq_analysis_3looks<span class="op">$</span>timing</a>
<a class="sourceLine" id="cb376-4" data-line-number="4">stopping_points</a></code></pre></div>
<pre><code>## [1]  500 1000 1500</code></pre>
<p>Multivariate testing (i.e. more than one independent variable in the experiment)</p>
<p>Compute summary values for four conditions</p>
<div class="sourceCode" id="cb378"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb378-1" data-line-number="1">new_click_data &lt;-<span class="st"> </span>click_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb378-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(Age, Gender, Clicks) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb378-3" data-line-number="3"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">impression_mean =</span> <span class="kw">mean</span>(Impressions))</a>
<a class="sourceLine" id="cb378-4" data-line-number="4"></a>
<a class="sourceLine" id="cb378-5" data-line-number="5"><span class="co"># Plot summary values for four conditions</span></a>
<a class="sourceLine" id="cb378-6" data-line-number="6"><span class="kw">ggplot</span>(new_click_data,</a>
<a class="sourceLine" id="cb378-7" data-line-number="7">       <span class="kw">aes</span>(<span class="dt">x =</span> Gender,</a>
<a class="sourceLine" id="cb378-8" data-line-number="8">           <span class="dt">y =</span> impression_mean,</a>
<a class="sourceLine" id="cb378-9" data-line-number="9">           <span class="dt">color =</span> Clicks,</a>
<a class="sourceLine" id="cb378-10" data-line-number="10">           <span class="dt">fill =</span> Age)) <span class="op">+</span></a>
<a class="sourceLine" id="cb378-11" data-line-number="11"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="dt">position =</span> <span class="st">&quot;dodge&quot;</span>)</a></code></pre></div>
<p><img src="code4stem_files/figure-html/use%20broom%20to%20visualize%20clicks-1.png" width="672" /></p>
<div class="sourceCode" id="cb379"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb379-1" data-line-number="1">multivar_results &lt;-<span class="st"> </span><span class="kw">lm</span>(Age <span class="op">~</span><span class="st"> </span>Gender <span class="op">*</span><span class="st"> </span>Clicks, <span class="dt">data =</span> click_data) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb379-2" data-line-number="2"><span class="st">  </span><span class="kw">tidy</span>()</a>
<a class="sourceLine" id="cb379-3" data-line-number="3"></a>
<a class="sourceLine" id="cb379-4" data-line-number="4">multivar_results<span class="op">$</span>p.value <span class="co">#none are significant</span></a></code></pre></div>
<pre><code>## [1]  0.000000e+00  0.000000e+00  0.000000e+00 3.569988e-236</code></pre>
<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb381-1" data-line-number="1">multivar_results</a></code></pre></div>
<pre><code>## # A tibble: 4 x 5
##   term          estimate std.error statistic   p.value
##   &lt;chr&gt;            &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
## 1 (Intercept)      23.4     0.0427     549.  0.       
## 2 Gender           17.2     0.0699     246.  0.       
## 3 Clicks           -5.00    0.123      -40.8 0.       
## 4 Gender:Clicks     7.72    0.235       32.8 3.57e-236</code></pre>
<p>Organize variables and run logistic regression:</p>
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb383-1" data-line-number="1">new_click_data_results &lt;-<span class="st"> </span>click_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb383-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">gender =</span> <span class="kw">factor</span>(Gender,</a>
<a class="sourceLine" id="cb383-3" data-line-number="3">                           <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;0&quot;</span>, <span class="st">&quot;1&quot;</span>))) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb383-4" data-line-number="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">clicks =</span> <span class="kw">factor</span>(Clicks,</a>
<a class="sourceLine" id="cb383-5" data-line-number="5">                           <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;0&quot;</span>))) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb383-6" data-line-number="6"><span class="st">  </span><span class="kw">glm</span>(gender <span class="op">~</span><span class="st"> </span>gender <span class="op">*</span><span class="st"> </span>clicks,</a>
<a class="sourceLine" id="cb383-7" data-line-number="7">      <span class="dt">family =</span> <span class="st">&quot;binomial&quot;</span>,</a>
<a class="sourceLine" id="cb383-8" data-line-number="8">      <span class="dt">data =</span> .) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb383-9" data-line-number="9"><span class="st">  </span><span class="kw">tidy</span>()</a></code></pre></div>
<pre><code>## Warning in model.matrix.default(...): the response appeared on the right-hand
## side and was dropped</code></pre>
<pre><code>## Warning in model.matrix.default(...): problem with term 1 in model.matrix: no
## columns are assigned</code></pre>
<div class="sourceCode" id="cb386"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb386-1" data-line-number="1">new_click_data_results</a></code></pre></div>
<pre><code>## # A tibble: 3 x 5
##   term            estimate std.error statistic p.value
##   &lt;chr&gt;              &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
## 1 (Intercept)       -0.894    0.0114   -78.5     0    
## 2 clicks0          -21.7     94.2       -0.230   0.818
## 3 gender1:clicks0   45.1    154.         0.293   0.769</code></pre>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="tests-for-experiments.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="r-for-reporting.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["code4stem.pdf", "code4stem.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
